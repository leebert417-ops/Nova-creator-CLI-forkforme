### 模块1.2：变量初始化条目（Beta版）

本模块在稳定版“变量初始化条目”的基础上，新增“数据结构安全”的约束能力。你可以在 `[InitVar]` 的JSON数据中使用 `"$meta"`（对象）与 `"$__META_EXTENSIBLE__$"`（数组）来声明结构规则，系统将据此生成“模式（schema）”，并在 LLM 执行 `_.assign` / `_.remove` 等结构性变更时进行校验，阻止未授权的结构变动。

重要说明：
- 此文档适用于 MVU Beta 运行时。若你的运行环境为稳定版，请使用《1.1.变量初始化条目.md》，不要在初始化数据中加入元信息键，否则可能作为普通数据被保存。
- 初始化完成后，所有 `"$meta"` 与 `"$__META_EXTENSIBLE__$"` 将被移除，不会出现在后续的 `stat_data` 中。

### 语法与规则

1) 对象元信息：`"$meta"`（可选）
- `"extensible"`: `boolean`，默认 `false`
  - `false`：对象结构锁定；禁止新增/删除键。
  - `true`：对象结构开放；允许 `_.assign` 新增键、`_.remove` 删除键。开启后该层子元素默认视为非必需，除非在 `required` 中另行指定。
- `"required"`: `string[]`，声明本层必需字段，禁止被删除。
- `"recursiveExtensible"`: `boolean`，默认 `false`；为 `true` 时对子孙对象穿透生效，直到遇到某层显式 `"extensible": false`。
- `"template"`: `object | array`，用于 `_.assign` 新增结构时的模板合并（自动补齐子结构）。

2) 数组扩展标记：`"$__META_EXTENSIBLE__$"`
- 默认所有数组结构锁定；若数组内包含该特殊字符串，则视为可扩展，允许增删项；初始化后该字符串会被移除。

### 示例模板

请参考格式并结合你的项目进行裁剪，不要照抄内容。

<example>
```json5
{
  "currentTime": "2025年07月15日 星期二 下午 02:00",
  "currentLocation": "山间小径",

  "baiYaoyao": {
    "$meta": {
      "extensible": false,
      "required": ["emotion", "thoughts", "outfit"],
      "template": {}
    },
    "emotion": "慵懒而欣喜",
    "thoughts": "这小东西总算回来了，不知这次又带了什么好吃的。",
    "outfit": "简约飘逸的白色汉服"
  },

  "memories": [
    "$__META_EXTENSIBLE__$",
    "雨中初遇"
  ],

  "world": {
    "$meta": {
      "extensible": true,
      "required": ["weather"],
      "recursiveExtensible": false,
      "template": {
        "event": { "name": "", "stage": 0 }
      }
    },
    "weather": "晴朗"
  }
}
```
</example>

### 输出要求（与稳定版一致的基础上，强调Beta差异）

1. 主体输出：仅输出JSON5数据块，禁止使用注释。
2. 顶层结构：必须为对象（`{}`）。
3. 兼容提示：
   - 若项目加载了 MVU Beta 运行时，上述元信息将用于生成“模式”并在结构变更时校验；初始化后元信息会被移除。
   - 若未加载 Beta 运行时，请改用稳定版文档，不要包含 `"$meta"` 与 `"$__META_EXTENSIBLE__$"`。

### 放置与集成说明

1. 存放位置：
   - “此JSON5数据块应放置于世界书的任意条目中，该条目的名称必须包含 `[InitVar]` 标记（例如：`[InitVar]初始化`），且该条目无需启用。条目名称不应包含文件后缀。”

2. 与其他模块的关系：
   - 与《3.2.变量处理指令集beta.md》配合使用，以启用 `_.add`、`_.assign`、`_.remove` 等增强命令和模式校验。
   - 与《2.变量更新规则.md》保持一致，初始化与更新逻辑分离。

3. 设计建议：
   - 对关键对象定义 `required` 与 `extensible`，优先锁定仅需读写值的层级。
   - 仅对确需动态增删项的数组放置 `"$__META_EXTENSIBLE__$"`，避免无意扩张结构。
   - 如需批量创建同构子结构，准备好 `template` 以减少LLM构造出错。
