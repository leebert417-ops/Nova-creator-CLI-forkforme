<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>æ¦œä¸€å¤§å“¥æ¨¡æ‹Ÿå™¨ çŠ¶æ€</title>
    <style>
      :root {
        --day-bg: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        --day-card-bg: rgba(255, 255, 255, 0.95);
        --day-text: #2d3748;
        --day-text-secondary: #4a5568;
        --day-border: #e2e8f0;
        --day-button-bg: #667eea;
        --day-button-hover: #5a67d8;
        --day-shadow: rgba(102, 126, 234, 0.3);

        --night-bg: linear-gradient(135deg, #1a202c 0%, #2d3748 100%);
        --night-card-bg: rgba(45, 55, 72, 0.95);
        --night-text: #f7fafc;
        --night-text-secondary: #cbd5e0;
        --night-border: #4a5568;
        --night-button-bg: #805ad5;
        --night-button-hover: #6b46c1;
        --night-shadow: rgba(128, 90, 213, 0.3);
      }

      body {
        margin: 0;
        padding: 0;
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        transition: background 0.5s ease;
      }

      body.day-mode {
        background: var(--day-bg);
      }

      body.night-mode {
        background: var(--night-bg);
      }

      .status-card {
        width: 95%;
        max-width: 1200px;
        margin: 20px auto;
        border-radius: 16px;
        overflow: visible;
        transition: all 0.5s ease;
        position: relative;
        z-index: 1;
      }

      .status-card.expanded {
        min-height: 900px;
      }

      .day-mode .status-card {
        background: var(--day-card-bg);
      }

      .night-mode .status-card {
        background: var(--night-card-bg);
      }

      @media (max-width: 768px) {
        .status-card {
          width: 98%;
          margin: 10px auto;
          border-radius: 12px;
        }
      }

      .card-header {
        padding: 20px;
        text-align: center;
        border-bottom: 2px solid;
        transition: all 0.5s ease;
      }

      .day-mode .card-header {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        border-bottom-color: var(--day-border);
      }

      .night-mode .card-header {
        background: linear-gradient(135deg, #805ad5 0%, #6b46c1 100%);
        border-bottom-color: var(--night-border);
      }

      .card-header h2 {
        margin: 0;
        color: white;
        font-size: 24px;
        font-weight: 600;
      }

      @media (max-width: 768px) {
        .card-header h2 {
          font-size: 20px;
        }
      }

      .card-body {
        padding: 24px;
      }

      @media (max-width: 768px) {
        .card-body {
          padding: 16px;
        }
      }

      .info-section {
        margin-bottom: 24px;
      }

      .info-item {
        display: flex;
        align-items: center;
        padding: 12px 16px;
        margin-bottom: 12px;
        border-radius: 8px;
        transition: all 0.3s ease;
      }

      @media (max-width: 768px) {
        .info-item {
          padding: 10px 12px;
          margin-bottom: 10px;
        }
      }

      .day-mode .info-item {
        background: rgba(102, 126, 234, 0.1);
        border: 1px solid var(--day-border);
      }

      .night-mode .info-item {
        background: rgba(128, 90, 213, 0.1);
        border: 1px solid var(--night-border);
      }

      .info-icon {
        font-size: 20px;
        margin-right: 12px;
        width: 24px;
        text-align: center;
      }

      .info-label {
        font-weight: 600;
        margin-right: 12px;
        min-width: 60px;
        transition: color 0.5s ease;
      }

      .day-mode .info-label {
        color: var(--day-text);
      }

      .night-mode .info-label {
        color: var(--night-text);
      }

      .info-value {
        flex: 1;
        font-size: 16px;
        transition: color 0.5s ease;
      }

      .day-mode .info-value {
        color: var(--day-text-secondary);
      }

      .night-mode .info-value {
        color: var(--night-text-secondary);
      }

      .action-section {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 12px;
        margin-top: 20px;
      }

      @media (max-width: 768px) {
        .action-section {
          grid-template-columns: 1fr;
          gap: 12px;
        }
      }

      .action-button {
        padding: 14px 20px;
        border: none;
        border-radius: 8px;
        font-size: 16px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
      }

      .day-mode .action-button {
        background: var(--day-button-bg);
        color: white;
      }

      .day-mode .action-button:hover {
        background: var(--day-button-hover);
        transform: translateY(-2px);
      }

      .night-mode .action-button {
        background: var(--night-button-bg);
        color: white;
      }

      .night-mode .action-button:hover {
        background: var(--night-button-hover);
        transform: translateY(-2px);
      }

      @media (max-width: 768px) {
        .action-button {
          padding: 12px 16px;
          font-size: 14px;
        }
      }

      .action-button:active {
        transform: translateY(0);
      }

      .action-button.secondary {
        opacity: 0.9;
      }

      .day-buttons,
      .night-buttons {
        display: none;
        grid-column: 1 / -1;
        grid-template-columns: inherit;
        gap: inherit;
      }

      .day-buttons.active,
      .night-buttons.active {
        display: grid;
      }

      .time-badge {
        display: inline-block;
        padding: 4px 12px;
        border-radius: 12px;
        font-size: 14px;
        font-weight: 600;
        transition: all 0.5s ease;
      }

      .day-mode .time-badge {
        background: linear-gradient(135deg, #fbd38d 0%, #f6ad55 100%);
        color: #744210;
      }

      .night-mode .time-badge {
        background: linear-gradient(135deg, #4c51bf 0%, #434190 100%);
        color: #e9d8fd;
      }

      .modal-overlay {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.7);
        z-index: 9998;
        justify-content: center;
        align-items: center;
      }

      .modal-overlay.show {
        display: flex;
      }

      .modal-content {
        background: white;
        border-radius: 16px;
        padding: 24px;
        max-width: 600px;
        width: 90%;
        height: 600px;
        max-height: 80vh;
        display: flex;
        flex-direction: column;
        overflow: hidden;
      }

      .modal-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
        padding-bottom: 12px;
        border-bottom: 2px solid #e2e8f0;
        flex-shrink: 0;
      }

      #streamerList {
        flex: 1;
        overflow-y: auto;
        overflow-x: hidden;
      }

      .modal-title {
        font-size: 20px;
        font-weight: 600;
        color: #2d3748;
      }

      .modal-close {
        background: none;
        border: none;
        font-size: 24px;
        cursor: pointer;
        color: #4a5568;
        padding: 0;
        width: 32px;
        height: 32px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 50%;
        transition: background 0.3s ease;
      }

      .modal-close:hover {
        background: #e2e8f0;
      }

      .streamer-card {
        border: 1px solid #e2e8f0;
        border-radius: 12px;
        margin-bottom: 12px;
        overflow: hidden;
        transition: all 0.3s ease;
      }

      .streamer-card:hover {
        border-color: #667eea;
      }

      .streamer-header {
        padding: 16px;
        cursor: pointer;
        display: flex;
        justify-content: space-between;
        align-items: center;
        background: #f7fafc;
        transition: background 0.3s ease;
      }

      .streamer-header:hover {
        background: #edf2f7;
      }

      .streamer-name {
        font-size: 16px;
        font-weight: 600;
        color: #2d3748;
      }

      .streamer-platform {
        font-size: 14px;
        color: #718096;
        margin-left: 8px;
      }

      .streamer-arrow {
        font-size: 14px;
        color: #4a5568;
        transition: transform 0.3s ease;
      }

      .streamer-card.expanded .streamer-arrow {
        transform: rotate(180deg);
      }

      .streamer-details {
        max-height: 0;
        overflow: hidden;
        transition: max-height 0.3s ease;
      }

      .streamer-card.expanded .streamer-details {
        max-height: 500px;
      }

      .streamer-details-content {
        padding: 16px;
        background: white;
      }

      .detail-row {
        margin-bottom: 12px;
        display: flex;
        gap: 8px;
      }

      .detail-label {
        font-weight: 600;
        color: #4a5568;
        min-width: 80px;
      }

      .detail-value {
        color: #2d3748;
        flex: 1;
      }

      .meet-button {
        margin-top: 16px;
        padding: 12px 24px;
        background: #667eea;
        color: white;
        border: none;
        border-radius: 8px;
        font-size: 14px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
        width: 100%;
      }

      .meet-button:hover {
        background: #5a67d8;
        transform: translateY(-2px);
      }

      .empty-message {
        text-align: center;
        padding: 40px 20px;
        color: #718096;
        font-size: 16px;
      }

      .selection-modal {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.9);
        z-index: 10000;
        justify-content: center;
        align-items: center;
      }

      .selection-modal.show {
        display: flex;
      }

      .selection-content {
        background: white;
        border-radius: 16px;
        padding: 24px;
        max-width: 800px;
        width: 90%;
        height: 600px;
        max-height: 80vh;
        display: flex;
        flex-direction: column;
        overflow: hidden;
      }

      .selection-header {
        text-align: center;
        margin-bottom: 24px;
        padding-bottom: 16px;
        border-bottom: 2px solid #e2e8f0;
        flex-shrink: 0;
      }

      .selection-title {
        font-size: 24px;
        font-weight: 600;
        color: #2d3748;
        margin: 0 0 8px 0;
      }

      .selection-subtitle {
        font-size: 14px;
        color: #718096;
      }

      .temp-streamer-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
        gap: 16px;
        overflow-y: auto;
        overflow-x: hidden;
        flex: 1;
      }

      @media (max-width: 768px) {
        .temp-streamer-grid {
          grid-template-columns: 1fr;
        }
      }

      .temp-streamer-card {
        border: 2px solid #e2e8f0;
        border-radius: 12px;
        padding: 16px;
        background: #f7fafc;
        transition: all 0.3s ease;
        cursor: pointer;
      }

      .temp-streamer-card:hover {
        border-color: #667eea;
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(102, 126, 234, 0.2);
      }

      .temp-streamer-name {
        font-size: 18px;
        font-weight: 600;
        color: #2d3748;
        margin-bottom: 8px;
      }

      .temp-streamer-platform {
        display: inline-block;
        background: #667eea;
        color: white;
        padding: 4px 12px;
        border-radius: 12px;
        font-size: 12px;
        margin-bottom: 12px;
      }

      .temp-detail-row {
        margin-bottom: 8px;
        font-size: 14px;
      }

      .temp-detail-label {
        font-weight: 600;
        color: #4a5568;
        display: inline-block;
        min-width: 60px;
      }

      .temp-detail-value {
        color: #2d3748;
      }

      .select-streamer-button {
        width: 100%;
        margin-top: 12px;
        padding: 10px;
        background: #667eea;
        color: white;
        border: none;
        border-radius: 8px;
        font-size: 14px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
      }

      .select-streamer-button:hover {
        background: #5a67d8;
      }

      .platform-modal {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.8);
        z-index: 9999;
        justify-content: center;
        align-items: center;
      }

      .platform-modal.show {
        display: flex;
      }

      .platform-content {
        background: white;
        border-radius: 16px;
        padding: 32px;
        max-width: 500px;
        width: 90%;
      }

      .platform-header {
        display: flex;
        justify-content: space-between;
        align-items: flex-start;
        margin-bottom: 24px;
        position: relative;
      }

      .platform-header-text {
        flex: 1;
        text-align: center;
      }

      .platform-title {
        font-size: 24px;
        font-weight: 600;
        color: #2d3748;
        margin: 0 0 8px 0;
      }

      .platform-subtitle {
        font-size: 14px;
        color: #718096;
      }

      .platform-grid {
        display: grid;
        gap: 16px;
      }

      .platform-option {
        padding: 20px;
        border: 2px solid #e2e8f0;
        border-radius: 12px;
        cursor: pointer;
        transition: all 0.3s ease;
        text-align: left;
      }

      .platform-option:hover {
        border-color: #667eea;
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(102, 126, 234, 0.2);
      }

      .platform-name {
        font-size: 18px;
        font-weight: 600;
        color: #2d3748;
        margin-bottom: 8px;
      }

      .platform-description {
        font-size: 14px;
        color: #718096;
        line-height: 1.5;
      }

      .platform-option.normal {
        background: linear-gradient(135deg, #e0f2fe 0%, #bae6fd 100%);
      }

      .platform-option.spicy {
        background: linear-gradient(135deg, #fce7f3 0%, #fbcfe8 100%);
      }

      .platform-option.adult {
        background: linear-gradient(135deg, #fee2e2 0%, #fecaca 100%);
      }

      /* è‡ªå®šä¹‰æ»šåŠ¨æ¡æ ·å¼ */
      #streamerList::-webkit-scrollbar,
      .temp-streamer-grid::-webkit-scrollbar,
      .live-comments::-webkit-scrollbar {
        width: 8px;
      }

      #streamerList::-webkit-scrollbar-track,
      .temp-streamer-grid::-webkit-scrollbar-track,
      .live-comments::-webkit-scrollbar-track {
        background: #f1f1f1;
        border-radius: 4px;
      }

      #streamerList::-webkit-scrollbar-thumb,
      .temp-streamer-grid::-webkit-scrollbar-thumb,
      .live-comments::-webkit-scrollbar-thumb {
        background: #cbd5e0;
        border-radius: 4px;
      }

      #streamerList::-webkit-scrollbar-thumb:hover,
      .temp-streamer-grid::-webkit-scrollbar-thumb:hover,
      .live-comments::-webkit-scrollbar-thumb:hover {
        background: #a0aec0;
      }

      /* ç›´æ’­ç•Œé¢æ ·å¼ */
      .live-container {
        display: none;
        width: 95%;
        max-width: 1200px;
        margin: 20px auto;
        background: white;
        border-radius: 16px;
        overflow: hidden;
        min-height: calc(100vh - 40px);
      }

      .live-container.active {
        display: flex;
        flex-direction: column;
      }

      .live-header {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        padding: 16px 24px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        color: white;
        flex-shrink: 0;
      }

      .live-streamer-info {
        display: flex;
        align-items: center;
        gap: 12px;
      }

      .live-streamer-avatar {
        width: 40px;
        height: 40px;
        background: linear-gradient(135deg, #ffd700 0%, #ff6b6b 100%);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 20px;
      }

      .live-streamer-name {
        font-size: 18px;
        font-weight: 600;
      }

      .live-viewer-count {
        background: rgba(255, 255, 255, 0.2);
        padding: 4px 12px;
        border-radius: 12px;
        font-size: 14px;
      }

      .live-exit-button {
        background: rgba(255, 255, 255, 0.2);
        border: none;
        color: white;
        padding: 8px 16px;
        border-radius: 8px;
        font-size: 14px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
      }

      .live-exit-button:hover {
        background: rgba(255, 255, 255, 0.3);
      }

      .live-content {
        flex: 1;
        display: flex;
        flex-direction: column;
        overflow: hidden;
      }

      .live-video-section {
        flex: 2;
        min-height: 200px;
        background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
        padding: 32px;
        padding-bottom: 50px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-bottom: 2px solid #e2e8f0;
        position: relative;
      }

      .live-description {
        color: #f7fafc;
        font-size: 18px;
        line-height: 1.8;
        text-align: center;
        max-width: 800px;
        padding: 20px;
      }

      .live-indicator {
        position: absolute;
        bottom: 16px;
        right: 16px;
        display: flex;
        align-items: center;
        gap: 8px;
        background: rgba(0, 0, 0, 0.5);
        padding: 8px 16px;
        border-radius: 20px;
        backdrop-filter: blur(10px);
      }

      .live-dot {
        width: 8px;
        height: 8px;
        background: #ff4444;
        border-radius: 50%;
        animation: pulse 2s ease-in-out infinite;
      }

      @keyframes pulse {
        0%,
        100% {
          opacity: 1;
          transform: scale(1);
        }
        50% {
          opacity: 0.6;
          transform: scale(1.2);
        }
      }

      .live-text {
        color: #ffffff;
        font-size: 14px;
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 1px;
      }

      .live-comment-section {
        flex: 3;
        min-height: 250px;
        display: flex;
        flex-direction: column;
        background: #f7fafc;
      }

      .live-comment-header {
        padding: 12px 24px;
        background: white;
        border-bottom: 2px solid #e2e8f0;
        font-weight: 600;
        color: #2d3748;
        font-size: 16px;
        flex-shrink: 0;
      }

      .live-comments {
        flex: 1;
        overflow-y: auto;
        overflow-x: hidden;
        padding: 16px 24px;
      }

      .live-comment-item {
        margin-bottom: 12px;
        padding: 12px;
        background: white;
        border-radius: 8px;
        border: 1px solid #e2e8f0;
        transition: all 0.3s ease;
      }

      .live-comment-item:hover {
        border-color: #667eea;
        box-shadow: 0 2px 8px rgba(102, 126, 234, 0.1);
      }

      .live-comment-user {
        font-weight: 600;
        color: #667eea;
        font-size: 14px;
        margin-bottom: 4px;
      }

      .live-comment-text {
        color: #2d3748;
        font-size: 14px;
        line-height: 1.5;
      }

      .live-action-bar {
        padding: 16px 24px;
        background: white;
        border-top: 2px solid #e2e8f0;
        display: flex;
        gap: 12px;
        flex-shrink: 0;
      }

      .live-action-btn {
        flex: 1;
        padding: 12px 24px;
        border: none;
        border-radius: 8px;
        font-size: 16px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
      }

      .live-gift-btn {
        background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        color: white;
      }

      .live-gift-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(245, 87, 108, 0.4);
      }

      .live-follow-btn {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
      }

      .live-follow-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
      }

      @media (max-width: 768px) {
        .live-container {
          width: 100%;
          margin: 0;
          border-radius: 0;
          min-height: 100vh;
        }

        .live-container.active {
          width: 100%;
          margin: 0;
          border-radius: 0;
        }

        .live-video-section {
          padding: 20px;
          padding-bottom: 50px;
          min-height: 180px;
        }

        .live-description {
          font-size: 16px;
          padding: 16px;
        }

        .live-comment-section {
          min-height: 200px;
        }

        .live-indicator {
          bottom: 12px;
          right: 12px;
          padding: 6px 12px;
        }

        .live-dot {
          width: 6px;
          height: 6px;
        }

        .live-text {
          font-size: 12px;
        }

        .live-comments {
          padding: 12px 16px;
        }

        .live-action-bar {
          padding: 12px 16px;
        }

        .live-action-btn {
          padding: 10px 16px;
          font-size: 14px;
        }
      }

      /* æ‰“èµå¼¹çª—æ ·å¼ */
      .gift-modal {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.8);
        z-index: 10001;
        justify-content: center;
        align-items: center;
      }

      .gift-modal.show {
        display: flex;
      }

      .gift-content {
        background: white;
        border-radius: 16px;
        padding: 24px;
        max-width: 500px;
        width: 90%;
        max-height: 80vh;
        overflow-y: auto;
      }

      .gift-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
        padding-bottom: 12px;
        border-bottom: 2px solid #e2e8f0;
      }

      .gift-title {
        font-size: 20px;
        font-weight: 600;
        color: #2d3748;
      }

      .gift-body {
        text-align: center;
        padding: 40px 20px;
      }

      .gift-placeholder-icon {
        font-size: 64px;
        margin-bottom: 16px;
      }

      .gift-placeholder-text {
        color: #718096;
        font-size: 16px;
        line-height: 1.6;
      }
    </style>
  </head>
  <body>
    <div class="status-card" id="status-card">
      <div class="card-header">
        <h2>æ¦œä¸€å¤§å“¥æ¨¡æ‹Ÿå™¨</h2>
      </div>

      <div class="card-body">
        <div class="info-section">
          <div class="info-item">
            <span class="info-icon">ğŸ•</span>
            <span class="info-label">æ—¶é—´</span>
            <span class="info-value">
              <span class="time-badge" id="time-display">åŠ è½½ä¸­...</span>
            </span>
          </div>
          <div class="info-item">
            <span class="info-icon">ğŸ“</span>
            <span class="info-label">åœ°ç‚¹</span>
            <span class="info-value" id="location-display">åŠ è½½ä¸­...</span>
          </div>
        </div>

        <div class="action-section">
          <div class="day-buttons" id="day-buttons">
            <button class="action-button" onclick="onWorkClick()">ğŸ’¼ å·¥ä½œ</button>
            <button class="action-button secondary" onclick="onMeetClick()">â˜• çº¿ä¸‹çº¦è§</button>
          </div>
          <div class="night-buttons" id="night-buttons">
            <button class="action-button" onclick="onRestClick()">ğŸ˜´ ä¼‘æ¯</button>
            <button class="action-button secondary" onclick="onStreamClick()">ğŸ“± è§‚çœ‹ç›´æ’­</button>
          </div>
        </div>
      </div>
    </div>

    <div class="modal-overlay" id="meetModal">
      <div class="modal-content">
        <div class="modal-header">
          <div class="modal-title">çº¦è§è°ï¼Ÿ</div>
          <button class="modal-close" onclick="closeMeetModal()">Ã—</button>
        </div>
        <div id="streamerList"></div>
      </div>
    </div>

    <div class="selection-modal" id="selectionModal">
      <div class="selection-content">
        <div class="selection-header">
          <h2 class="selection-title">é€‰æ‹©ä¸»æ’­</h2>
          <p class="selection-subtitle">ä»ä»¥ä¸‹ä¸»æ’­ä¸­é€‰æ‹©ä¸€ä½è¿›è¡Œè§‚çœ‹</p>
        </div>
        <div id="tempStreamerGrid" class="temp-streamer-grid"></div>
      </div>
    </div>

    <div class="platform-modal" id="platformModal">
      <div class="platform-content">
        <div class="platform-header">
          <div class="platform-header-text">
            <h2 class="platform-title">é€‰æ‹©ç›´æ’­å¹³å°</h2>
            <p class="platform-subtitle">é€‰æ‹©ä»Šæ™šè¦è®¿é—®çš„ç›´æ’­å¹³å°</p>
          </div>
          <button class="modal-close" onclick="closePlatformModal()">Ã—</button>
        </div>
        <div class="platform-grid">
          <div class="platform-option normal" onclick="selectPlatform('çŒ«é±¼ç›´æ’­')">
            <div class="platform-name">ğŸ± çŒ«é±¼ç›´æ’­</div>
            <div class="platform-description">ç›‘ç®¡ä¸¥æ ¼çš„æ­£è§„å¹³å°ï¼Œä¸»æ’­ä»¬åœ¨è¿™é‡Œå±•ç¤ºæ‰è‰ºï¼Œæ°›å›´ç›¸å¯¹çº¯å‡€ã€‚</div>
          </div>
          <div class="platform-option spicy" onclick="selectPlatform('èœœæ¡ƒç›´æ’­')">
            <div class="platform-name">ğŸ‘ èœœæ¡ƒç›´æ’­</div>
            <div class="platform-description">æ¸¸èµ°åœ¨ç°è‰²åœ°å¸¦çš„å¹³å°ï¼Œè¿™é‡Œçš„ä¸»æ’­æ›´å¤§èƒ†ï¼Œå†…å®¹æ›´å…·è¯±æƒ‘åŠ›ã€‚</div>
          </div>
          <div class="platform-option adult" onclick="selectPlatform('å¤©å ‚å²›')">
            <div class="platform-name">ğŸï¸ å¤©å ‚å²›</div>
            <div class="platform-description">å®Œå…¨æ— é™åˆ¶çš„æˆäººå¹³å°ï¼Œå¯ä»¥æ»¡è¶³ä½ æœ€æ·±å±‚çš„å¹»æƒ³ã€‚</div>
          </div>
        </div>
      </div>
    </div>

    <div class="live-container" id="liveContainer">
      <div class="live-header">
        <div class="live-streamer-info">
          <div class="live-streamer-avatar">ğŸ­</div>
          <div>
            <div class="live-streamer-name" id="liveStreamerName">åŠ è½½ä¸­...</div>
            <div class="live-viewer-count">ğŸ‘ï¸ <span id="liveViewerCount">0</span> äººè§‚çœ‹</div>
          </div>
        </div>
        <button class="live-exit-button" onclick="exitLive()">é€€å‡ºç›´æ’­</button>
      </div>

      <div class="live-content">
        <div class="live-video-section">
          <div class="live-description" id="liveDescription">ç›´æ’­ç”»é¢åŠ è½½ä¸­...</div>
          <div class="live-indicator">
            <div class="live-dot"></div>
            <div class="live-text">Live</div>
          </div>
        </div>

        <div class="live-comment-section">
          <div class="live-comment-header">ğŸ’¬ ç›´æ’­é—´è¯„è®º</div>
          <div class="live-comments" id="liveComments">
            <div class="live-comment-item">
              <div class="live-comment-user">ç³»ç»Ÿæç¤º</div>
              <div class="live-comment-text">æ¬¢è¿æ¥åˆ°ç›´æ’­é—´ï¼</div>
            </div>
          </div>
        </div>
      </div>

      <div class="live-action-bar">
        <button class="live-action-btn live-gift-btn" onclick="onGiftClick()">ğŸ æ‰“èµ</button>
        <button class="live-action-btn live-follow-btn" onclick="onFollowClick()">â¤ï¸ å…³æ³¨</button>
      </div>
    </div>

    <div class="gift-modal" id="giftModal">
      <div class="gift-content">
        <div class="gift-header">
          <div class="gift-title">ğŸ æ‰“èµç¤¼ç‰©</div>
          <button class="modal-close" onclick="closeGiftModal()">Ã—</button>
        </div>
        <div class="gift-body">
          <div class="gift-placeholder-icon">ğŸš§</div>
          <div class="gift-placeholder-text">
            æ‰“èµåŠŸèƒ½æ­£åœ¨å¼€å‘ä¸­<br />
            æ•¬è¯·æœŸå¾…æ›´å¤šç²¾å½©åŠŸèƒ½ï¼
          </div>
        </div>
      </div>
    </div>

    <script>
      function SafeGetValue(obj, path, defaultValue = 'N/A') {
        let keys = Array.isArray(path) ? path : path.split('.');
        let current = obj;
        for (let i = 0; i < keys.length; i++) {
          if (
            current === undefined ||
            current === null ||
            typeof current !== 'object' ||
            !current.hasOwnProperty(keys[i])
          ) {
            return defaultValue;
          }
          current = current[keys[i]];
        }
        if (current === undefined || current === null) {
          return defaultValue;
        }
        if (Array.isArray(current)) {
          if (current.length > 0) {
            const actualValue = current[0];
            if (typeof actualValue === 'boolean') {
              return actualValue;
            }
            return String(actualValue);
          } else {
            return defaultValue;
          }
        }
        if (typeof current === 'boolean') {
          return current;
        }
        return String(current);
      }

      function updateProgressBar(barId, valueMainId, valueDescId, rawValueFromCharacterData, min, max, color) {
        const progressBar = document.getElementById(barId);
        const valueMainDisplay = document.getElementById(valueMainId);
        const valueDescDisplay = document.getElementById(valueDescId);
        if (!valueMainDisplay) return;
        let fullDisplayString = SafeGetValue({ temp: rawValueFromCharacterData }, 'temp', String(min));
        let numericValue = min;
        let descriptionText = '';
        const descriptionMatch = String(fullDisplayString).match(/\((.+)\)$/);
        if (descriptionMatch && descriptionMatch[1]) {
          descriptionText = descriptionMatch[1];
          fullDisplayString = String(fullDisplayString).substring(0, descriptionMatch.index).trim();
        }
        const valueMatch = String(fullDisplayString).match(/(-?\d+(\.\d+)?)(?=[^\d.]*$|->)/);
        if (valueMatch) {
          numericValue = parseFloat(valueMatch[1]);
          const parts = String(fullDisplayString).split('->');
          valueMainDisplay.innerText = parts.length > 1 ? parts[1].trim() : parts[0].trim();
        } else if (!isNaN(parseFloat(fullDisplayString))) {
          numericValue = parseFloat(fullDisplayString);
          valueMainDisplay.innerText = fullDisplayString;
        } else {
          if (Array.isArray(rawValueFromCharacterData) && typeof rawValueFromCharacterData[0] === 'number') {
            numericValue = rawValueFromCharacterData[0];
            valueMainDisplay.innerText = String(numericValue);
          } else if (typeof rawValueFromCharacterData === 'number' || typeof rawValueFromCharacterData === 'string') {
            valueMainDisplay.innerText = String(rawValueFromCharacterData);
          } else {
            valueMainDisplay.innerText = SafeGetValue({ temp: rawValueFromCharacterData }, 'temp', String(min));
          }
        }
        if (valueDescDisplay) {
          valueDescDisplay.innerText = descriptionText ? `(${descriptionText})` : '';
        }
        if (progressBar) {
          numericValue = Math.max(min, Math.min(max, numericValue));
          const range = max - min;
          const percentage = range === 0 ? (numericValue >= max ? 100 : 0) : ((numericValue - min) / range) * 100;
          progressBar.style.width = `${Math.max(0, Math.min(100, percentage))}%`;
          progressBar.style.backgroundColor = color ? color : 'var(--accent-highlight)';
        }
      }

      async function initDisplay() {
        try {
          const messages = await getChatMessages(getCurrentMessageId());
          if (!messages || messages.length === 0 || !messages[0].data) {
            document.getElementById('status-card').innerHTML =
              "<p style='color:red; padding:10px;'>æ— æ³•åŠ è½½çŠ¶æ€æ•°æ® (messages empty)</p>";
            return;
          }
          const gameData = messages[0].data;
          const characterData = gameData.stat_data;
          if (!characterData) {
            document.getElementById('status-card').innerHTML =
              "<p style='color:red; padding:10px;'>æ— æ³•åŠ è½½çŠ¶æ€æ•°æ® (characterData missing)</p>";
            return;
          }

          currentCharacterData = characterData;

          const liveMode = characterData['ç›´æ’­æ¨¡å¼'] || 0;

          // æ£€æµ‹ç›´æ’­æ¨¡å¼
          if (liveMode === 1 || liveMode === '1') {
            showLiveUI();
            return;
          }

          // æ˜¾ç¤ºæ™®é€šçŠ¶æ€æ 
          hideLiveUI();

          const timeValue = SafeGetValue(characterData, 'æ—¶é—´', 'å¤œæ™š');
          const currentTimeMinutes = SafeGetValue(characterData, 'å½“å‰æ—¶åˆ»', 1230);
          const locationValue = SafeGetValue(characterData, 'åœ°ç‚¹', 'è±ªååˆ«å¢…');
          const nightDetection = SafeGetValue(characterData, 'å¤œæ™šç›‘æµ‹', '1');
          const selectionMode = characterData['æŒ‘é€‰æ¨¡å¼'] || 0;

          // å°†åˆ†é’Ÿæ•°è½¬æ¢ä¸º HH:mm æ ¼å¼
          const minutes = parseInt(currentTimeMinutes) || 1230;
          const hours = Math.floor(minutes / 60) % 24;
          const mins = minutes % 60;
          const currentTimeValue = `${String(hours).padStart(2, '0')}:${String(mins).padStart(2, '0')}`;

          const timeDisplay = document.getElementById('time-display');
          const locationDisplay = document.getElementById('location-display');

          if (timeDisplay) {
            timeDisplay.innerText = `${timeValue} ${currentTimeValue}`;
          }

          if (locationDisplay) {
            locationDisplay.innerText = locationValue;
          }

          const isNight = nightDetection === '1' || nightDetection === 1 || nightDetection === true;

          const bodyElement = document.body;
          const dayButtons = document.getElementById('day-buttons');
          const nightButtons = document.getElementById('night-buttons');

          if (isNight) {
            bodyElement.classList.remove('day-mode');
            bodyElement.classList.add('night-mode');
            if (dayButtons) dayButtons.classList.remove('active');
            if (nightButtons) nightButtons.classList.add('active');
          } else {
            bodyElement.classList.remove('night-mode');
            bodyElement.classList.add('day-mode');
            if (nightButtons) nightButtons.classList.remove('active');
            if (dayButtons) dayButtons.classList.add('active');
          }

          if (selectionMode === 1 || selectionMode === '1') {
            showSelectionModal();
          }
        } catch (error) {
          document.getElementById(
            'status-card',
          ).innerHTML = `<p style='color:red; padding:10px;'>çŠ¶æ€æ åŠ è½½å‡ºé”™: ${error.message}</p>`;
        }
      }

      function toggleSection(element) {
        const content = element.nextElementSibling;
        const arrow = element.querySelector('span:last-child');
        if (!content || !arrow) return;
        const isExpanded = content.classList.toggle('expanded');
        element.classList.toggle('expanded-header', isExpanded);
        arrow.innerText = isExpanded ? 'â–²' : 'â–¼';
      }

      let currentCharacterData = null;

      function getPlatformDisplay(platforms) {
        if (!platforms) return 'æœªçŸ¥å¹³å°';

        if (Array.isArray(platforms)) {
          return platforms.join(' Â· ');
        }

        return String(platforms);
      }

      function showSelectionModal() {
        expandCard();

        if (!currentCharacterData) {
          console.error('æ•°æ®æœªåŠ è½½');
          return;
        }

        const tempStreamers = currentCharacterData['ä¸´æ—¶å¥³ä¸»æ’­'] || [];

        if (!Array.isArray(tempStreamers)) {
          console.error('ä¸´æ—¶å¥³ä¸»æ’­æ•°æ®ä¸æ˜¯æ•°ç»„');
          return;
        }

        const gridContainer = document.getElementById('tempStreamerGrid');
        const validStreamers = [];

        for (let i = 0; i < tempStreamers.length; i++) {
          const streamer = tempStreamers[i];
          if (streamer && typeof streamer === 'object' && streamer !== null) {
            if (streamer.name === '$__META_EXTENSIBLE__$') {
              continue;
            }
            validStreamers.push(streamer);
          }
        }

        if (validStreamers.length === 0) {
          gridContainer.innerHTML = '<div class="empty-message">æš‚æ— å¯é€‰æ‹©çš„ä¸»æ’­<br/>è¯·ç­‰å¾…ç³»ç»Ÿç”Ÿæˆä¸»æ’­æ•°æ®</div>';
        } else {
          let html = '';
          validStreamers.forEach((streamer, index) => {
            html += `
              <div class="temp-streamer-card">
                <div class="temp-streamer-name">${streamer.name || 'æœªçŸ¥ä¸»æ’­'}</div>
                <div class="temp-streamer-platform">${getPlatformDisplay(
                  streamer['æ‰€å¤„å¹³å°'] || streamer.platform,
                )}</div>
                <div class="temp-detail-row">
                  <span class="temp-detail-label">å¤–è²Œï¼š</span>
                  <span class="temp-detail-value">${streamer['å¤–è²Œ'] || 'æœªçŸ¥'}</span>
                </div>
                <div class="temp-detail-row">
                  <span class="temp-detail-label">èº«æï¼š</span>
                  <span class="temp-detail-value">${streamer['èº«æ'] || 'æœªçŸ¥'}</span>
                </div>
                <div class="temp-detail-row">
                  <span class="temp-detail-label">èƒ¸éƒ¨ï¼š</span>
                  <span class="temp-detail-value">${streamer['èƒ¸éƒ¨'] || 'æœªçŸ¥'}</span>
                </div>
                <div class="temp-detail-row">
                  <span class="temp-detail-label">è‡€éƒ¨ï¼š</span>
                  <span class="temp-detail-value">${streamer['è‡€éƒ¨'] || 'æœªçŸ¥'}</span>
                </div>
                <button class="select-streamer-button" onclick="selectTempStreamer('${streamer.name}', ${index})">
                  é€‰æ‹©è§‚çœ‹
                </button>
              </div>
            `;
          });
          gridContainer.innerHTML = html;
        }

        document.getElementById('selectionModal').classList.add('show');
      }

      function selectTempStreamer(name, index) {
        collapseCard();
        const command = `/setinput {{user}}é€‰æ‹©è§‚çœ‹${name}çš„ç›´æ’­ï¼Œè¯·æŠŠç›´æ’­æ¨¡å¼è®¾ä¸º1ï¼ŒæŠŠè¯¥ä¸»æ’­çš„æ•°æ®å¤åˆ¶åˆ°"è§‚çœ‹ä¸­å¥³ä¸»æ’­"ï¼ŒæŠŠæŒ‘é€‰æ¨¡å¼è®¾ä¸º0ï¼Œæ¸…ç©º"ä¸´æ—¶å¥³ä¸»æ’­"åˆ—è¡¨`;
        if (typeof SillyTavern !== 'undefined' && SillyTavern.executeSlashCommandsWithOptions) {
          SillyTavern.executeSlashCommandsWithOptions(command);
        } else {
          console.error('SillyTavern API not found!');
        }
      }

      function expandCard() {
        const card = document.getElementById('status-card');
        if (card) {
          const currentHeight = card.offsetHeight;
          const minExpandHeight = 900;

          if (currentHeight < minExpandHeight) {
            card.classList.add('expanded');
          }
        }
      }

      function collapseCard() {
        const card = document.getElementById('status-card');
        if (card) {
          card.classList.remove('expanded');
        }
      }

      function onWorkClick() {
        const command = '/setinput {{user}}å†³å®šå»å·¥ä½œï¼Œå¿«é€Ÿåº¦è¿‡è¿™ä¸€å¤©ï¼Œä¸è¦æå†™è¿‡ç¨‹';
        if (typeof SillyTavern !== 'undefined' && SillyTavern.executeSlashCommandsWithOptions) {
          SillyTavern.executeSlashCommandsWithOptions(command);
        } else {
          console.error('SillyTavern API not found!');
        }
      }

      async function onMeetClick() {
        expandCard();

        if (!currentCharacterData) {
          alert('æ•°æ®åŠ è½½ä¸­ï¼Œè¯·ç¨åå†è¯•');
          return;
        }

        const followedStreamers = currentCharacterData['å…³æ³¨å¥³ä¸»æ’­'] || [];

        if (!Array.isArray(followedStreamers)) {
          alert('æ•°æ®æ ¼å¼é”™è¯¯ï¼šå…³æ³¨å¥³ä¸»æ’­æ•°æ®ä¸æ˜¯æ•°ç»„');
          console.error('å…³æ³¨å¥³ä¸»æ’­æ•°æ®:', followedStreamers);
          return;
        }

        const availableStreamers = [];
        for (let i = 0; i < followedStreamers.length; i++) {
          const streamer = followedStreamers[i];
          if (streamer && typeof streamer === 'object' && streamer !== null) {
            if (streamer.name === '$__META_EXTENSIBLE__$') {
              continue;
            }
            if (streamer['çº¦è§æ„æ„¿åº¦'] === 100) {
              availableStreamers.push(streamer);
            }
          }
        }

        const modal = document.getElementById('meetModal');
        const streamerList = document.getElementById('streamerList');

        if (availableStreamers.length === 0) {
          streamerList.innerHTML = '<div class="empty-message">æš‚æ— å¯çº¦è§çš„ä¸»æ’­<br/>ï¼ˆçº¦è§æ„æ„¿åº¦éœ€è¾¾åˆ°100ï¼‰</div>';
        } else {
          let html = '';
          availableStreamers.forEach((streamer, index) => {
            html += `
              <div class="streamer-card" id="streamer-${index}">
                <div class="streamer-header" onclick="toggleStreamerCard(${index})">
                  <div>
                    <span class="streamer-name">${streamer.name || 'æœªçŸ¥ä¸»æ’­'}</span>
                    <span class="streamer-platform">${streamer.platform || ''}</span>
                  </div>
                  <span class="streamer-arrow">â–¼</span>
                </div>
                <div class="streamer-details">
                  <div class="streamer-details-content">
                    <div class="detail-row">
                      <span class="detail-label">å¤–è²Œï¼š</span>
                      <span class="detail-value">${streamer['å¤–è²Œ'] || 'æœªçŸ¥'}</span>
                    </div>
                    <div class="detail-row">
                      <span class="detail-label">èº«æï¼š</span>
                      <span class="detail-value">${streamer['èº«æ'] || 'æœªçŸ¥'}</span>
                    </div>
                    <div class="detail-row">
                      <span class="detail-label">èƒ¸éƒ¨ï¼š</span>
                      <span class="detail-value">${streamer['èƒ¸éƒ¨'] || 'æœªçŸ¥'}</span>
                    </div>
                    <div class="detail-row">
                      <span class="detail-label">è‡€éƒ¨ï¼š</span>
                      <span class="detail-value">${streamer['è‡€éƒ¨'] || 'æœªçŸ¥'}</span>
                    </div>
                    <div class="detail-row">
                      <span class="detail-label">çº¦è§æ„æ„¿ï¼š</span>
                      <span class="detail-value">${streamer['çº¦è§æ„æ„¿åº¦'] || 0}</span>
                    </div>
                    <button class="meet-button" onclick="meetStreamer('${streamer.name}')">
                      çº¦è§ ${streamer.name}
                    </button>
                  </div>
                </div>
              </div>
            `;
          });
          streamerList.innerHTML = html;
        }

        modal.classList.add('show');
      }

      function toggleStreamerCard(index) {
        const card = document.getElementById(`streamer-${index}`);
        if (card) {
          card.classList.toggle('expanded');
        }
      }

      function closeMeetModal() {
        const modal = document.getElementById('meetModal');
        modal.classList.remove('show');
        collapseCard();
      }

      function closePlatformModal() {
        const modal = document.getElementById('platformModal');
        modal.classList.remove('show');
        collapseCard();
      }

      function meetStreamer(name) {
        closeMeetModal();
        collapseCard();
        const command = `/setinput {{user}}å†³å®šä¸${name}è¿›è¡Œçº¿ä¸‹çº¦è§`;
        if (typeof SillyTavern !== 'undefined' && SillyTavern.executeSlashCommandsWithOptions) {
          SillyTavern.executeSlashCommandsWithOptions(command);
        } else {
          console.error('SillyTavern API not found!');
        }
      }

      function onRestClick() {
        const command = '/setinput {{user}}å†³å®šç›´æ¥ä¼‘æ¯ï¼Œå¿«è¿›åº¦è¿‡è¿™ä¸€æ™šï¼Œä¸è¦æå†™è¿‡ç¨‹';
        if (typeof SillyTavern !== 'undefined' && SillyTavern.executeSlashCommandsWithOptions) {
          SillyTavern.executeSlashCommandsWithOptions(command);
        } else {
          console.error('SillyTavern API not found!');
        }
      }

      function onStreamClick() {
        expandCard();
        document.getElementById('platformModal').classList.add('show');
      }

      function selectPlatform(platformName) {
        document.getElementById('platformModal').classList.remove('show');
        collapseCard();

        const command = `/setinput {{user}}å†³å®šè¿›å…¥ã€${platformName}ã€‘è§‚çœ‹ç›´æ’­ï¼Œè¯·æŠŠæŒ‘é€‰æ¨¡å¼è®¾ä¸º1ï¼Œå…ˆæ¸…é™¤ä¸´æ—¶å¥³ä¸»æ’­åˆ—è¡¨ï¼Œç„¶ååœ¨ä¸´æ—¶å¥³ä¸»æ’­ä¸­ç”Ÿæˆ3-5ä¸ªè¯¥å¹³å°çš„ä¸»æ’­æ•°æ®ï¼Œæ­£æ–‡ç®€çŸ­æè¿°{{user}}çš„æ“ä½œï¼Œä¸è¦åœ¨æ­£æ–‡è¾“å‡ºä¸»æ’­æ•°æ®ï¼Œä¸è¦è®©{{user}}é€‰æ‹©ä»»ä½•ä¸»æ’­ï¼Œè¿™åº”è¯¥ç”±ç©å®¶å†³å®š`;
        if (typeof SillyTavern !== 'undefined' && SillyTavern.executeSlashCommandsWithOptions) {
          SillyTavern.executeSlashCommandsWithOptions(command);
        } else {
          console.error('SillyTavern API not found!');
        }
      }

      // ç›´æ’­ç›¸å…³å‡½æ•°
      function showLiveUI() {
        const statusCard = document.getElementById('status-card');
        const liveContainer = document.getElementById('liveContainer');

        if (statusCard) statusCard.style.display = 'none';
        if (liveContainer) liveContainer.classList.add('active');

        // æ›´æ–°ç›´æ’­ç•Œé¢æ•°æ®
        updateLiveData();
      }

      function hideLiveUI() {
        const statusCard = document.getElementById('status-card');
        const liveContainer = document.getElementById('liveContainer');

        if (statusCard) statusCard.style.display = 'block';
        if (liveContainer) liveContainer.classList.remove('active');
      }

      function updateLiveData() {
        if (!currentCharacterData) return;

        // æ›´æ–°ä¸»æ’­ä¿¡æ¯
        const watchingStreamer = currentCharacterData['è§‚çœ‹ä¸­å¥³ä¸»æ’­'];
        const liveDescription = currentCharacterData['ç›´æ’­ç”»é¢æè¿°'] || 'ä¸»æ’­æ­£åœ¨å‡†å¤‡ä¸­...';
        const liveComments = currentCharacterData['ç›´æ’­è¯„è®º'] || [];

        const streamerNameEl = document.getElementById('liveStreamerName');
        const descriptionEl = document.getElementById('liveDescription');
        const commentsEl = document.getElementById('liveComments');
        const viewerCountEl = document.getElementById('liveViewerCount');

        // æ›´æ–°ä¸»æ’­åç§°
        if (streamerNameEl && watchingStreamer && watchingStreamer.name) {
          streamerNameEl.innerText = watchingStreamer.name;
        }

        // æ›´æ–°ç›´æ’­ç”»é¢æè¿°
        if (descriptionEl) {
          descriptionEl.innerText = liveDescription || 'ä¸»æ’­æ­£åœ¨å‡†å¤‡ä¸­...';
        }

        // æ›´æ–°è§‚çœ‹äººæ•°ï¼ˆéšæœºç”Ÿæˆï¼‰
        if (viewerCountEl) {
          const randomViewers = Math.floor(Math.random() * 5000) + 1000;
          viewerCountEl.innerText = randomViewers.toLocaleString();
        }

        // æ›´æ–°è¯„è®ºåŒº
        if (commentsEl && Array.isArray(liveComments)) {
          let commentsHTML = '';

          if (liveComments.length === 0) {
            commentsHTML = `
              <div class="live-comment-item">
                <div class="live-comment-user">ç³»ç»Ÿæç¤º</div>
                <div class="live-comment-text">æ¬¢è¿æ¥åˆ°ç›´æ’­é—´ï¼</div>
              </div>
            `;
          } else {
            liveComments.forEach(comment => {
              if (comment && typeof comment === 'object') {
                commentsHTML += `
                  <div class="live-comment-item">
                    <div class="live-comment-user">${comment.user || 'åŒ¿åç”¨æˆ·'}</div>
                    <div class="live-comment-text">${comment.text || ''}</div>
                  </div>
                `;
              }
            });
          }

          commentsEl.innerHTML = commentsHTML;

          // è‡ªåŠ¨æ»šåŠ¨åˆ°åº•éƒ¨
          setTimeout(() => {
            commentsEl.scrollTop = commentsEl.scrollHeight;
          }, 100);
        }
      }

      function exitLive() {
        const command = '/setinput {{user}}æ„Ÿåˆ°ç–²æƒ«ï¼Œå†³å®šå»ä¼‘æ¯ï¼Œå¿«è¿›åˆ°æ¬¡æ—¥ç™½å¤©ï¼Œä¸è¦æå†™è¿‡ç¨‹';
        if (typeof SillyTavern !== 'undefined' && SillyTavern.executeSlashCommandsWithOptions) {
          SillyTavern.executeSlashCommandsWithOptions(command);
        } else {
          console.error('SillyTavern API not found!');
        }
      }

      function onGiftClick() {
        const giftModal = document.getElementById('giftModal');
        if (giftModal) {
          giftModal.classList.add('show');
        }
      }

      function closeGiftModal() {
        const giftModal = document.getElementById('giftModal');
        if (giftModal) {
          giftModal.classList.remove('show');
        }
      }

      function onFollowClick() {
        const command = '/setinput {{user}}å†³å®šå…³æ³¨è¿™ä¸ªä¸»æ’­ï¼Œè¯·æŠŠå¥¹çš„æ•°æ®è½¬ç§»åˆ°"å…³æ³¨å¥³ä¸»æ’­"';
        if (typeof SillyTavern !== 'undefined' && SillyTavern.executeSlashCommandsWithOptions) {
          SillyTavern.executeSlashCommandsWithOptions(command);
        } else {
          console.error('SillyTavern API not found!');
        }
      }

      document.addEventListener('DOMContentLoaded', initDisplay);
    </script>
  </body>
</html>
